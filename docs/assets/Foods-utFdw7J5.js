import{r,u as y,j as e,t as S,a as v,l as N,b,c as C}from"./index-Bv7uXh9J.js";function F({food:t}){const[n,o]=r.useState(1),[s,c]=r.useState(""),[l,d]=r.useState(""),[x,m]=r.useState(!1),[p,i]=r.useState(!1),u=y(),h=r.useMemo(()=>n*t.price,[n]),j=async()=>{if(!s||!l||!n)return;const a={name:s,phone:l,article:t.name,quantity:n,price:h};t.quantity-n<0?alert("No hay existencias del producto"):(i(!0),v(a).then(()=>{i(!1)}).then(()=>{const g=t.id,f=t.quantity-n;N(g,f),m(!0)}).then(()=>{c(""),d(""),o(1),u(b())}).finally(()=>{i(!1)}))};return e.jsxs("article",{children:[e.jsxs("header",{children:[e.jsxs("h2",{children:[t.name," - ",t.desc]}),e.jsx("h4",{children:h}),e.jsx("label",{htmlFor:"quantity",children:" Cantidad"}),e.jsx("input",{type:"number",id:"quantity",value:n,onChange:a=>o(Number(a.target.value))})]}),e.jsx("input",{type:"text",value:s,placeholder:"Tu nombre",onChange:a=>c(a.target.value)}),e.jsx("input",{type:"text",value:l,placeholder:"Tu número de teléfono",onChange:a=>d(a.target.value)}),e.jsxs("section",{role:"group",children:[e.jsx("button",{onClick:j,children:"Enviar producto"}),e.jsx("button",{onClick:()=>u(S()),children:"Volver al menú"})]}),x&&e.jsx("span",{style:{color:"green"},children:"Pedido enviado. Recibirá un SMS una vez esté listo para recoger"}),p&&e.jsx("span",{style:{color:"green"},children:"Procesando pedido."})]})}function P(){const[t,n]=r.useState(),{items:o}=C(s=>s.menu);return e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"foodTitle",children:"Choose from our Menu"}),e.jsx("ul",{className:"ulFoods",children:o.map(s=>e.jsxs("article",{className:"liFoods",onClick:()=>n(s),children:[e.jsx("header",{children:e.jsx("img",{className:"foodImg",src:`/tienda-comida-firebase/images/${s.image}`,alt:s.name,style:{height:"100px"}})}),e.jsxs("div",{className:"foodItem",children:[e.jsx("p",{className:"foodDesc",children:s.desc}),e.jsxs("p",{className:"foodPrice",children:[s.price,"$"]})]}),e.jsx("footer",{children:(t==null?void 0:t.id)===s.id&&e.jsx(F,{food:t})})]},s.id))})]})}export{P as default};
